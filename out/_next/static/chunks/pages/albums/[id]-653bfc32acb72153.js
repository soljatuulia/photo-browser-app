(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{9347:function(t,e,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/albums/[id]",function(){return o(1401)}])},6484:function(t,e,o){"use strict";o.d(e,{I:function(){return N}});var a=o(5893),r=o(7294),n=o(1664),i=o.n(n),s=o(5675),l=o.n(s),c=o(1163),h=o(8207),u=o(8008),d=o(8318),p=o(6556),f=o(7502),_=o(356),g=o(5727),m=o(4410),x=o(8964),w=o(4998);let j=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,o=await fetch("http://jsonplaceholder.typicode.com/photos?_page=".concat(t,"&_limit=").concat(e));if(!o.ok)throw Error("Failed to fetch photos");let a=Math.ceil(parseInt(o.headers.get("X-Total-Count")||"0",10)/e);return{photos:await o.json(),totalPages:a}},v=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,a=await fetch("https://jsonplaceholder.typicode.com/albums/".concat(t,"/photos?_page=").concat(e,"&_limit=").concat(o));if(!a.ok){if(404===a.status)throw Error("Album with ID ".concat(t," not found"));throw Error("Failed to fetch photos")}let r=Math.ceil(parseInt(a.headers.get("X-Total-Count")||"0",10)/o);return{photos:await a.json(),totalPages:r}};var y=o(5719),b=o.n(y);function N(t){let{initialPhotos:e,albumId:o,album:n}=t,s=(0,c.useRouter)(),y=Math.ceil(e.length/12),[N,E]=(0,r.useState)(Number(s.query.page)||1),[P,S]=(0,r.useState)(y),[k,C]=(0,r.useState)(Array.isArray(e)?e:[]),[I,T]=(0,r.useState)(""),[G,A]=(0,r.useState)(!1),M=(0,x.a)("(max-width: 768px)"),O=(0,x.a)("(max-width: 350px)");return(0,r.useEffect)(()=>{(async function(){A(!0);try{let t;let e=(t=o?await v(o,N):await j(N)).photos.filter(t=>t.title.toLowerCase().includes(I.toLowerCase()));C(e),S(t.totalPages),s.push({pathname:s.pathname,query:{...s.query,page:N}},void 0,{scroll:!1})}catch(t){w.N9.show({title:"Oops!",color:"red",message:t.message})}A(!1)})()},[N,o,I]),(0,a.jsx)("div",{children:(0,a.jsxs)(h.K,{gap:"lg",maw:500,className:b().container,children:[n?(0,a.jsxs)(u.D,{order:2,className:b().title,children:["Explore photos from ",n.title||"Untitled"]}):(0,a.jsx)(u.D,{order:2,children:"Explore All Photos"}),(0,a.jsx)(d.I,{className:b().search,placeholder:"Search photos by name",value:I,onChange:t=>T(t.currentTarget.value)}),G?(0,a.jsx)("div",{className:b().loader,children:(0,a.jsx)(p.a,{size:"lg",type:"bars",color:"pink"})}):k.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.M,{cols:O?1:M?2:3,spacing:15,children:k.map(t=>(0,a.jsx)("div",{"data-testid":"photo",children:(0,a.jsx)(i(),{href:"/photos/".concat(t.id),children:(0,a.jsx)(l(),{src:t.thumbnailUrl,alt:t.title,width:150,height:150,priority:!0})})},t.id))}),(0,a.jsx)(_.Z,{justify:"center",children:P>1&&(0,a.jsx)(g.t,{value:N,total:P,onChange:t=>{if(t<1||t>P){w.N9.show({title:"Oops!",color:"red",message:"Invalid page number"});return}E(t)},size:"md",color:"pink",siblings:1,boundaries:1})})]}):(0,a.jsx)(m.x,{children:"Sorry, no photos found!"})]})})}},1401:function(t,e,o){"use strict";o.r(e),o.d(e,{__N_SSG:function(){return n},default:function(){return i}});var a=o(5893),r=o(6484),n=!0;function i(t){let{photos:e=[],album:o,albumId:n}=t;return(0,a.jsx)("div",{children:(0,a.jsx)(r.I,{initialPhotos:e,albumId:n,album:o})})}},5719:function(t){t.exports={container:"PhotoGrid_container___Zp3b",title:"PhotoGrid_title__grEgl",search:"PhotoGrid_search__8cK2T",loader:"PhotoGrid_loader__Jehv2"}}},function(t){t.O(0,[967,381,888,774,179],function(){return t(t.s=9347)}),_N_E=t.O()}]);