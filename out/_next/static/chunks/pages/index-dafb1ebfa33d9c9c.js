(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(4579)}])},6484:function(t,e,o){"use strict";o.d(e,{I:function(){return b}});var r=o(5893),a=o(7294),n=o(1664),s=o.n(n),i=o(5675),l=o.n(i),c=o(1163),h=o(8207),d=o(8008),u=o(8318),p=o(6556),f=o(7502),_=o(356),g=o(5727),m=o(4410),x=o(8964),w=o(4998);let j=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,o=await fetch("http://jsonplaceholder.typicode.com/photos?_page=".concat(t,"&_limit=").concat(e));if(!o.ok)throw Error("Failed to fetch photos");let r=Math.ceil(parseInt(o.headers.get("X-Total-Count")||"0",10)/e);return{photos:await o.json(),totalPages:r}},v=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=await fetch("https://jsonplaceholder.typicode.com/albums/".concat(t,"/photos?_page=").concat(e,"&_limit=").concat(o));if(!r.ok){if(404===r.status)throw Error("Album with ID ".concat(t," not found"));throw Error("Failed to fetch photos")}let a=Math.ceil(parseInt(r.headers.get("X-Total-Count")||"0",10)/o);return{photos:await r.json(),totalPages:a}};var y=o(5719),N=o.n(y);function b(t){let{initialPhotos:e,albumId:o,album:n}=t,i=(0,c.useRouter)(),y=Math.ceil(e.length/12),[b,E]=(0,a.useState)(Number(i.query.page)||1),[P,S]=(0,a.useState)(y),[k,C]=(0,a.useState)(Array.isArray(e)?e:[]),[I,T]=(0,a.useState)(""),[G,A]=(0,a.useState)(!1),M=(0,x.a)("(max-width: 768px)"),O=(0,x.a)("(max-width: 350px)");return(0,a.useEffect)(()=>{(async function(){A(!0);try{let t;let e=(t=o?await v(o,b):await j(b)).photos.filter(t=>t.title.toLowerCase().includes(I.toLowerCase()));C(e),S(t.totalPages),i.push({pathname:i.pathname,query:{...i.query,page:b}},void 0,{scroll:!1})}catch(t){w.N9.show({title:"Oops!",color:"red",message:t.message})}A(!1)})()},[b,o,I]),(0,r.jsx)("div",{children:(0,r.jsxs)(h.K,{gap:"lg",maw:500,className:N().container,children:[n?(0,r.jsxs)(d.D,{order:2,className:N().title,children:["Explore photos from ",n.title||"Untitled"]}):(0,r.jsx)(d.D,{order:2,children:"Explore All Photos"}),(0,r.jsx)(u.I,{className:N().search,placeholder:"Search photos by name",value:I,onChange:t=>T(t.currentTarget.value)}),G?(0,r.jsx)("div",{className:N().loader,children:(0,r.jsx)(p.a,{size:"lg",type:"bars",color:"pink"})}):k.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.M,{cols:O?1:M?2:3,spacing:15,children:k.map(t=>(0,r.jsx)("div",{"data-testid":"photo",children:(0,r.jsx)(s(),{href:"/photos/".concat(t.id),children:(0,r.jsx)(l(),{src:t.thumbnailUrl,alt:t.title,width:150,height:150,priority:!0})})},t.id))}),(0,r.jsx)(_.Z,{justify:"center",children:P>1&&(0,r.jsx)(g.t,{value:b,total:P,onChange:t=>{if(t<1||t>P){w.N9.show({title:"Oops!",color:"red",message:"Invalid page number"});return}E(t)},size:"md",color:"pink",siblings:1,boundaries:1})})]}):(0,r.jsx)(m.x,{children:"Sorry, no photos found!"})]})})}},4579:function(t,e,o){"use strict";o.r(e),o.d(e,{__N_SSG:function(){return n}});var r=o(5893),a=o(6484),n=!0;e.default=function(t){let{photos:e}=t;return(0,r.jsx)("div",{children:(0,r.jsx)(a.I,{initialPhotos:e})})}},5719:function(t){t.exports={container:"PhotoGrid_container___Zp3b",title:"PhotoGrid_title__grEgl",search:"PhotoGrid_search__8cK2T",loader:"PhotoGrid_loader__Jehv2"}}},function(t){t.O(0,[967,381,888,774,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);